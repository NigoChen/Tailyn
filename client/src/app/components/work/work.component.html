<!-- Form -->
<div class="container-lg border border-dark p-2 mt-2 mb-2">
  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, nam.
</div>
<!-- /Form -->

<!-- Table -->
<div class="table-responsive">
  <table class="table table-bordered table-sm">
    <!-- <table class="table table-striped"> -->
    <thead class="thead-dark">
      <tr>
        <th scope="col">工號</th>
        <th scope="col">一般工時</th>
        <th scope="col">加班工時</th>
        <th scope="col">工單</th>
        <th scope="col">機種</th>
        <th scope="col">站別</th>
        <th scope="col">備註</th>
        <th scope="col">時間</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of result_List; let i = index"
        [ngClass]="{'text-light bg-secondary': item?.w_Id == fb_Value_Index[0]}" (click)="choose(item)">
        <td>{{ item.w_JobNumber }}</td>
        <td class="text-truncate" [class.text-danger]="item.w_BTotal < 0">
          {{ item.w_BTotal }}分 | 已扣除{{ item.w_BDeduct }}
        </td>
        <td class="text-truncate" [class.text-danger]="item.w_OTotal < 0">
          {{ item.w_OTotal }}分 | 已扣除{{ item.w_ODeduct }}
        </td>
        <td>{{ item.w_WorkOrder }}</td>
        <td>{{ item.w_Model }}</td>
        <td>{{ item.w_Stand }} {{item.s_Title}}</td>
        <td>{{ item.w_Remark }}</td>
        <td>{{ item.w_Time | date: 'yyyy-MM-dd HH:mm' }}</td>
      </tr>
    </tbody>
  </table>
</div>
<!-- /Table -->

<ng-template #form_>
  <!-- Form -->
  <form [formGroup]="fbGroup" #form="ngForm">
    <div class="form-row">
      <!-- JobNumber -->
      <div class="form-group col-md-6">
        <label for="jobNumber" *ngIf="!errorValidators['w_JobNumber'].length; else jobNumber">工號</label>

        <ng-template #jobNumber>
          <label for="jobNumber" class="text-danger">{{ errorValidators['w_JobNumber'] }}</label>
        </ng-template>

        <input type="text" id="jobNumber" class="form-control form-control-sm" formControlName="w_JobNumber"
          placeholder="工號" (blur)="inputValidators(fbGroup, 'w_JobNumber')">
      </div>

      <!-- stand -->
      <div class="form-group col-md-6">
        <label for="stand" *ngIf="!errorValidators['w_Stand'].length; else stand">站別</label>

        <ng-template #stand>
          <label for="stand" class="text-danger">{{ errorValidators['w_Stand'] }}</label>
        </ng-template>

        <input class="form-control form-control-sm" formControlName="w_Stand" list="standtOptions" id="stand"
          placeholder="站別" (blur)="inputValidators(fbGroup, 'w_Stand')">

        <datalist id="standtOptions">
          <option *ngFor="let item of standList$ | async; index as i" [value]="item.s_Code"> {{item.s_Title}}
        </datalist>
      </div>
    </div>

    <!-- BMinute -->
    <div class="form-row border border-dark mb-1">
      <div class="form-group col-md-12 text-center mb-0">
        <label *ngIf="!errorValidators['w_BMinute'].length; else bMinute">一般工時</label>

        <ng-template #bMinute>
          <label class="text-danger">{{ errorValidators['w_BMinute'] }}</label>
        </ng-template>

        <i class="bi bi-clock ml-2 mr-2"></i>
        <!-- Value -->
        <span class="font-weight-bold" [class.text-danger]="fb_Value['w_BTotal'].value < 0">{{
          fb_Value['w_BTotal'].value }}</span>
      </div>

      <!-- BMinute Start -->
      <div class="form-group col-5 text-center">
        <label for="SbMinute">開始</label>
        <input type="datetime-local" id="SbMinute" step="3600" class="form-control form-control-sm datetime-font-size"
          [value]="onValue('SbMinute')" (input)="onDate($event.target)">
      </div>

      <!-- BMinute End -->
      <div class="form-group col-5 text-center">
        <label for="EbMinute">結束</label>
        <input type="datetime-local" id="EbMinute" step="3600" class="form-control form-control-sm datetime-font-size"
          [value]="onValue('EbMinute')" (input)="onDate($event.target)">
      </div>
      <!-- Deduct -->
      <div class="form-group col text-center">
        <label for="bDeduct">扣除</label>
        <input type="number" id="bDeduct" class="form-control form-control-sm" step="5" min="0" max="100"
          formControlName="w_BDeduct" (input)="deduct_Change('w_BMinute')">
      </div>
    </div>

    <!-- OMinute -->
    <div class="form-row border border-dark mb-1">
      <div class="form-group col-md-12 text-center mb-0">
        <label *ngIf="!errorValidators['w_OMinute'].length; else oMinute">加班工時</label>

        <ng-template #oMinute>
          <label class="text-danger">{{ errorValidators['w_OMinute'] }}</label>
        </ng-template>

        <i class="bi bi-clock ml-2 mr-2"></i>
        <!-- Value -->
        <span class="font-weight-bold" [class.text-danger]="fb_Value['w_OTotal'].value < 0">{{
          fb_Value['w_OTotal'].value }}</span>
        <!-- <span class="font-weight-bold" [innerHtml]="minutes_Total('oMinute')"></span> -->
      </div>

      <!-- OMinute Start -->
      <div class="form-group col text-center">
        <label for="SoMinute">開始</label>
        <input type="datetime-local" id="SoMinute" step="3600" class="form-control form-control-sm datetime-font-size"
          [value]="onValue('SoMinute')" (input)="onDate($event.target)">
      </div>

      <!-- OMinute End -->
      <div class="form-group col text-center">
        <label for="EoMinute">結束</label>
        <input type="datetime-local" id="EoMinute" step="3600" class="form-control form-control-sm datetime-font-size"
          [value]="onValue('EoMinute')" (input)="onDate($event.target)">
      </div>

      <!-- Deduct -->
      <div class="form-group col-2 text-center">
        <label for="oDeduct">扣除</label>
        <input type="number" id="oDeduct" class="form-control form-control-sm" step="5" min="0" max="100"
          formControlName="w_ODeduct" (input)="deduct_Change('w_OMinute')">
      </div>
    </div>

    <div class="form-row">
      <!-- workOrder -->
      <div class="form-group col-md-6">
        <label for="workOrder" *ngIf="!errorValidators['w_WorkOrder'].length; else workOrder">工單</label>

        <ng-template #workOrder>
          <label for="workOrder" class="text-danger">{{ errorValidators['w_WorkOrder'] }}</label>
        </ng-template>

        <input type="text" id="workOrder" class="form-control form-control-sm" formControlName="w_WorkOrder"
          placeholder="工單" (blur)="inputValidators(fbGroup, 'w_WorkOrder')">
      </div>

      <!-- Model -->
      <div class="form-group col-md-6">
        <label for="model" *ngIf="!errorValidators['w_Model'].length; else model">機種</label>

        <ng-template #model>
          <label for="model" class="text-danger">{{ errorValidators['w_Model'] }}</label>
        </ng-template>

        <input type="text" id="model" class="form-control form-control-sm" formControlName="w_Model" placeholder="機種"
          (blur)="inputValidators(fbGroup, 'w_Model')">
      </div>
    </div>

    <div class="form-row">
      <!-- Remark -->
      <div class="form-group col-md-6">
        <label for="remark" *ngIf="!errorValidators['w_Remark'].length; else stand">備註</label>

        <ng-template #remark>
          <label for="remark" class="text-danger">{{ errorValidators['w_Remark'] }}</label>
        </ng-template>

        <input type="text" id="remark" class="form-control form-control-sm" formControlName="w_Remark" placeholder="備註"
          (blur)="inputValidators(fbGroup, 'w_Remark')">
      </div>

      <!-- Model -->
      <div class="form-group col-md-6">
        <label for="w_Time" *ngIf="!errorValidators['w_Time'].length; else model">日期</label>

        <ng-template #model>
          <label for="w_Time" class="text-danger">{{ errorValidators['w_Time'] }}</label>
        </ng-template>

        <input type="datetime-local" id="w_Time" step="3600" class="form-control form-control-sm" [value]="dateTime"
          (input)="onDate($event.target)">
      </div>
    </div>
  </form>
  <!-- /Form -->
</ng-template>

<!-- Level -->
<!-- <div class="form-group row">
      <label for="workOrder" class="col-3 col-form-label">權限</label>
      <div class="col">
        <select id="workOrder" class="form-control text-center custom-select" formControlName="w_WorkOrder">
          <option value="1" selected>
            普通
          </option>
        </select>
      </div>
    </div> -->


<!-- <input id="dateTime" class="form-control" placeholder="yyyy-mm-dd" (dateSelect)="onDate($event)"
            ngbDatepicker #dp="ngbDatepicker">
          <button class="btn btn-outline-secondary" (click)="dp.toggle()" type="button">
            <i class="bi bi-calendar-check"></i>
          </button> -->

<!-- <input type="time" id="appt" class="form-control"
       min="09:00" max="18:00"> -->

<!-- <input type="datetime-local" id="birthdaytime" class="form-control" [formControl]="fb_Value['w_Time']"
  (input)="onDate($event.target.value)"> -->

<!-- <ngb-timepicker [(ngModel)]="times" [hourStep]="1" [minuteStep]="1" [secondStep]="1" [seconds]="false"
  [meridian]="false" [size]="'small'" [spinners]="true" [readonlyInputs]="false">
</ngb-timepicker>
<hr>
<pre>Selected time: {{times | json}}</pre>


<ngb-datepicker #dp [(ngModel)]="model"></ngb-datepicker> -->